/* (c) IGOR KOWALCZYK. All rights reserved. */

const html=document.getElementsByTagName("html")[0],body=document.getElementsByTagName("body")[0],overlay=document.getElementById("overlay"),menu=document.getElementById("menu"),navbar=document.getElementById("navbar"),navbarLinks=document.querySelectorAll("#navbar a"),sections=document.querySelectorAll(".main-section");function findViewingLink(){const e=Array.from(sections).reverse().find(e=>e.getBoundingClientRect().top<=80);e&&Array.from(navbarLinks).forEach(t=>{t.getAttribute("href")===`#${e.getAttribute("id")}`?t.classList.add("selected"):t.classList.remove("selected")})}menu.addEventListener("click",()=>{body.classList.toggle("no-scroll"),menu.classList.toggle("open"),navbar.classList.toggle("open"),overlay.classList.toggle("open")}),overlay.addEventListener("click",()=>menu.click()),navbarLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),setTimeout(()=>ScrollTo.scrollVerticalToElementById(e.getAttribute("href").slice(1),60),window.innerWidth>=800?0:150),menu.click()})}),window.onscroll=findViewingLink,findViewingLink();var ScrollTo={documentVerticalScrollPosition:function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},viewportHeight:function(){return"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight},documentHeight:function(){return void 0!==document.height?document.height:document.body.offsetHeight},documentMaximumScrollPosition:function(){return this.documentHeight()-this.viewportHeight()},elementVerticalClientPositionById:function(e){return document.getElementById(e).getBoundingClientRect().top},scrollVerticalTickToPosition:function(e,t){var o=parseFloat(t)-parseFloat(e);Math.abs(o)<=.5?scrollTo(0,t):(e=.8*parseFloat(e)+.2*parseFloat(t),scrollTo(0,Math.round(e)),setTimeout("ScrollTo.scrollVerticalTickToPosition("+e+", "+t+")",1e3/60))},scrollVerticalToElementById:function(e,t){if(null!=document.getElementById(e)){var o=this.documentVerticalScrollPosition()+this.elementVerticalClientPositionById(e)-t,n=this.documentVerticalScrollPosition(),i=this.documentMaximumScrollPosition();o>i&&(o=i),this.scrollVerticalTickToPosition(n,o)}else console.warn("Cannot find element with id '"+e+"'.")}};